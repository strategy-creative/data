<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Christchurch B2B Market Analysis Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        :root {
            --background: 0 0% 100%;
            --foreground: 222.2 84% 4.9%;
            --card: 0 0% 100%;
            --card-foreground: 222.2 84% 4.9%;
            --popover: 0 0% 100%;
            --popover-foreground: 222.2 84% 4.9%;
            --primary: 221.2 83.2% 53.3%;
            --primary-foreground: 210 40% 98%;
            --secondary: 210 40% 96%;
            --secondary-foreground: 222.2 84% 4.9%;
            --muted: 210 40% 96%;
            --muted-foreground: 215.4 16.3% 46.9%;
            --accent: 210 40% 96%;
            --accent-foreground: 222.2 84% 4.9%;
            --destructive: 0 84.2% 60.2%;
            --destructive-foreground: 210 40% 98%;
            --border: 214.3 31.8% 91.4%;
            --input: 214.3 31.8% 91.4%;
            --ring: 221.2 83.2% 53.3%;
            --radius: 0.5rem;
            --chart-1: 221.2 83.2% 53.3%;
            --chart-2: 215.4 16.3% 46.9%;
            --chart-3: 142.1 76.2% 36.3%;
            --chart-4: 47.9 95.8% 53.1%;
            --chart-5: 346.8 77.2% 49.8%;
        }

        .dark {
            --background: 222.2 84% 4.9%;
            --foreground: 210 40% 98%;
            --card: 222.2 84% 4.9%;
            --card-foreground: 210 40% 98%;
            --popover: 222.2 84% 4.9%;
            --popover-foreground: 210 40% 98%;
            --primary: 217.2 91.2% 59.8%;
            --primary-foreground: 222.2 84% 4.9%;
            --secondary: 217.2 32.6% 17.5%;
            --secondary-foreground: 210 40% 98%;
            --muted: 217.2 32.6% 17.5%;
            --muted-foreground: 215 20.2% 65.1%;
            --accent: 217.2 32.6% 17.5%;
            --accent-foreground: 210 40% 98%;
            --destructive: 0 62.8% 30.6%;
            --destructive-foreground: 210 40% 98%;
            --border: 217.2 32.6% 17.5%;
            --input: 217.2 32.6% 17.5%;
            --ring: 224.3 76.3% 94.1%;
        }

        * {
            border-color: hsl(var(--border));
        }

        body {
            background-color: hsl(var(--background));
            color: hsl(var(--foreground));
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
        }

        .card {
            background-color: hsl(var(--card));
            color: hsl(var(--card-foreground));
            border: 1px solid hsl(var(--border));
            border-radius: var(--radius);
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            transition: all 0.2s ease-in-out;
        }

        .card:hover {
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }

        .metric-card {
            background: linear-gradient(135deg, hsl(var(--primary) / 0.05) 0%, hsl(var(--primary) / 0.1) 100%);
            border: 1px solid hsl(var(--primary) / 0.2);
            border-radius: var(--radius);
            transition: all 0.2s ease-in-out;
        }

        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }

        .metric-value {
            font-size: 2.25rem;
            font-weight: 700;
            line-height: 2.5rem;
            color: hsl(var(--primary));
            margin-bottom: 0.5rem;
        }

        .metric-label {
            font-size: 0.875rem;
            font-weight: 500;
            color: hsl(var(--muted-foreground));
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .chart-container {
            position: relative;
            height: 320px;
            width: 100%;
            margin: 1rem 0;
            background: linear-gradient(135deg, hsl(var(--muted) / 0.3) 0%, hsl(var(--muted) / 0.1) 100%);
            border-radius: var(--radius);
            padding: 1rem;
            border: 1px solid hsl(var(--border));
        }

        .citation {
            font-size: 0.75rem;
            color: hsl(var(--muted-foreground));
            margin-top: 1rem;
            padding: 0.75rem;
            background-color: hsl(var(--muted) / 0.5);
            border-radius: calc(var(--radius) - 2px);
            border-left: 3px solid hsl(var(--primary));
        }

        .source-link {
            color: hsl(var(--primary));
            text-decoration: underline;
            text-decoration-thickness: 1px;
            text-underline-offset: 2px;
            transition: color 0.2s ease-in-out;
        }

        .source-link:hover {
            color: hsl(var(--primary) / 0.8);
        }

        .table-container {
            overflow-x: auto;
            border-radius: var(--radius);
            border: 1px solid hsl(var(--border));
            background-color: hsl(var(--card));
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table-header {
            background-color: hsl(var(--muted));
        }

        .table-header-cell {
            padding: 1rem 1.5rem;
            text-align: left;
            font-size: 0.75rem;
            font-weight: 600;
            color: hsl(var(--muted-foreground));
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid hsl(var(--border));
        }

        .table-body {
            background-color: hsl(var(--card));
        }

        .table-row {
            transition: background-color 0.2s ease-in-out;
        }

        .table-row:hover {
            background-color: hsl(var(--muted) / 0.5);
        }

        .table-cell {
            padding: 1rem 1.5rem;
            font-size: 0.875rem;
            border-bottom: 1px solid hsl(var(--border));
        }

        .table-cell-primary {
            font-weight: 600;
            color: hsl(var(--foreground));
        }

        .table-cell-secondary {
            color: hsl(var(--muted-foreground));
        }

        .insight-card {
            padding: 1.5rem;
            border-radius: var(--radius);
            border: 1px solid;
            transition: all 0.2s ease-in-out;
        }

        .insight-card:hover {
            transform: translateY(-1px);
        }

        .insight-card-blue {
            background-color: hsl(221.2 83.2% 53.3% / 0.05);
            border-color: hsl(221.2 83.2% 53.3% / 0.2);
        }

        .insight-card-green {
            background-color: hsl(142.1 76.2% 36.3% / 0.05);
            border-color: hsl(142.1 76.2% 36.3% / 0.2);
        }

        .insight-card-purple {
            background-color: hsl(262.1 83.3% 57.8% / 0.05);
            border-color: hsl(262.1 83.3% 57.8% / 0.2);
        }

        .insight-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
        }

        .insight-title-blue {
            color: hsl(221.2 83.2% 53.3%);
        }

        .insight-title-green {
            color: hsl(142.1 76.2% 36.3%);
        }

        .insight-title-purple {
            color: hsl(262.1 83.3% 57.8%);
        }

        .insight-text {
            font-size: 0.875rem;
            line-height: 1.5;
            margin-bottom: 0.75rem;
        }

        .insight-text-blue {
            color: hsl(221.2 83.2% 53.3% / 0.8);
        }

        .insight-text-green {
            color: hsl(142.1 76.2% 36.3% / 0.8);
        }

        .insight-text-purple {
            color: hsl(262.1 83.3% 57.8% / 0.8);
        }

        .sources-section {
            background-color: hsl(var(--muted) / 0.3);
            border-radius: var(--radius);
            padding: 2rem;
            margin-top: 2rem;
            border: 1px solid hsl(var(--border));
        }

        .source-item {
            font-size: 0.875rem;
            color: hsl(var(--muted-foreground));
            margin-bottom: 0.75rem;
            padding: 0.5rem 0;
        }

        .source-number {
            font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
            color: hsl(var(--primary));
            font-weight: 600;
            margin-right: 0.5rem;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            border-radius: 9999px;
            border: 1px solid hsl(var(--border));
            background-color: hsl(var(--secondary));
            padding: 0.25rem 0.75rem;
            font-size: 0.75rem;
            font-weight: 500;
            color: hsl(var(--secondary-foreground));
            line-height: 1;
        }

        .badge-primary {
            background-color: hsl(var(--primary));
            color: hsl(var(--primary-foreground));
            border-color: hsl(var(--primary));
        }

        .badge-secondary {
            background-color: hsl(var(--secondary));
            color: hsl(var(--secondary-foreground));
            border-color: hsl(var(--border));
        }

        .section-header {
            margin-bottom: 1.5rem;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: hsl(var(--foreground));
            margin-bottom: 0.5rem;
        }

        .section-description {
            color: hsl(var(--muted-foreground));
            font-size: 0.875rem;
        }

        .trend-card {
            padding: 1.5rem;
            border-radius: var(--radius);
            border: 1px solid;
            transition: all 0.2s ease-in-out;
        }

        .trend-card:hover {
            transform: translateY(-1px);
        }

        .trend-card-yellow {
            background-color: hsl(47.9 95.8% 53.1% / 0.05);
            border-color: hsl(47.9 95.8% 53.1% / 0.2);
        }

        .trend-card-indigo {
            background-color: hsl(221.2 83.2% 53.3% / 0.05);
            border-color: hsl(221.2 83.2% 53.3% / 0.2);
        }

        .trend-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
        }

        .trend-title-yellow {
            color: hsl(47.9 95.8% 53.1%);
        }

        .trend-title-indigo {
            color: hsl(221.2 83.2% 53.3%);
        }

        .trend-text {
            font-size: 0.875rem;
            line-height: 1.5;
            margin-bottom: 0.75rem;
        }

        .trend-text-yellow {
            color: hsl(47.9 95.8% 53.1% / 0.8);
        }

        .trend-text-indigo {
            color: hsl(221.2 83.2% 53.3% / 0.8);
        }

        .data-note {
            margin-top: 1.5rem;
            padding: 1rem;
            background-color: hsl(var(--primary) / 0.05);
            border-radius: var(--radius);
            border: 1px solid hsl(var(--primary) / 0.2);
        }

        .data-note-text {
            font-size: 0.875rem;
            color: hsl(var(--primary) / 0.9);
            line-height: 1.5;
        }

        .header-badge {
            display: inline-flex;
            align-items: center;
            background-color: hsl(var(--primary) / 0.1);
            color: hsl(var(--primary));
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
            margin-top: 0.5rem;
            backdrop-filter: blur(8px);
            border: 1px solid hsl(var(--primary) / 0.2);
        }

        .metric-card {
            background: linear-gradient(135deg, hsl(var(--primary) / 0.05) 0%, hsl(var(--primary) / 0.1) 100%);
            border: 1px solid hsl(var(--primary) / 0.2);
            border-radius: var(--radius);
            transition: all 0.2s ease-in-out;
            position: relative;
            overflow: hidden;
        }

        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, hsl(var(--primary)), hsl(var(--chart-3)));
        }

        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }

        .metric-card:hover::before {
            background: linear-gradient(90deg, hsl(var(--chart-3)), hsl(var(--primary)));
        }

        @media (max-width: 768px) {
            .metric-value {
                font-size: 1.875rem;
                line-height: 2.25rem;
            }
            
            .chart-container {
                height: 250px;
            }
            
            .table-container {
                font-size: 0.75rem;
            }
            
            .table-cell, .table-header-cell {
                padding: 0.75rem 1rem;
            }
        }

        /* Animation classes */
        .fade-in {
            animation: fadeIn 0.6s ease-in-out;
        }

        .slide-up {
            animation: slideUp 0.8s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { 
                opacity: 0; 
                transform: translateY(20px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        /* Enhanced focus states */
        .card:focus-within {
            outline: 2px solid hsl(var(--ring));
            outline-offset: 2px;
        }

        .source-link:focus {
            outline: 2px solid hsl(var(--ring));
            outline-offset: 2px;
            border-radius: 4px;
        }
    </style>
</head>
<body class="min-h-screen bg-gray-50">
    <!-- Header -->
    <header class="bg-white border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
                <div>
                    <h1 class="text-3xl font-bold text-gray-900 tracking-tight">Christchurch B2B Market Analysis</h1>
                    <p class="text-gray-600 mt-2 text-lg">Printer/Photocopier Leasing Market Dashboard</p>
                    <div class="header-badge">
                        ðŸ“Š Data Sources: IBISWorld, Figure.NZ, Government Procurement, Industry Reports (2024-2025)
                    </div>
                </div>
                <div class="mt-4 sm:mt-0">
                    <div class="badge badge-primary">Market Intelligence</div>
                </div>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Key Metrics -->
        <div class="section-header">
            <h2 class="section-title">Market Overview</h2>
            <p class="section-description">Key performance indicators and market size metrics for Christchurch B2B printer leasing</p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12 fade-in">
            <div class="metric-card p-6 text-center">
                <div class="metric-value">NZD $133.6M</div>
                <div class="metric-label">Total Addressable Market</div>
                <div class="citation">
                    <strong>Source:</strong> IBISWorld [12][16][17]
                </div>
            </div>
            <div class="metric-card p-6 text-center">
                <div class="metric-value">NZD $60.1M</div>
                <div class="metric-label">Current Market Size</div>
                <div class="citation">
                    <strong>Source:</strong> IBISWorld [17][18][16]
                </div>
            </div>
            <div class="metric-card p-6 text-center">
                <div class="metric-value">NZD $73.5M</div>
                <div class="metric-label">Growth Potential</div>
                <div class="citation">
                    <strong>Source:</strong> IBISWorld [17][18][16]
                </div>
            </div>
            <div class="metric-card p-6 text-center">
                <div class="metric-value">45%</div>
                <div class="metric-label">Market Penetration</div>
                <div class="citation">
                    <strong>Source:</strong> Industry Reports [17][18][16]
                </div>
            </div>
        </div>

        <!-- Charts Row 1 -->
        <div class="section-header slide-up">
            <h2 class="section-title">Market Analysis</h2>
            <p class="section-description">Visual representation of market penetration, segments, and revenue distribution</p>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12 slide-up">
            <!-- Market Penetration Pie Chart -->
            <div class="card p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold text-gray-900">Market Penetration</h3>
                    <div class="badge badge-secondary">Pie Chart</div>
                </div>
                <div class="chart-container">
                    <canvas id="penetrationChart"></canvas>
                </div>
                <div class="citation">
                    <strong>Data Source:</strong> IBISWorld Market Research [12][16][17] | 
                    <a href="https://www.ibisworld.com/new-zealand/industry/printing/166/" class="source-link" target="_blank">View Source</a>
                </div>
            </div>

            <!-- Business Segments Bar Chart -->
            <div class="card p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold text-gray-900">Market Share by Business Segment</h3>
                    <div class="badge badge-secondary">Bar Chart</div>
                </div>
                <div class="chart-container">
                    <canvas id="segmentsChart"></canvas>
                </div>
                <div class="citation">
                    <strong>Data Source:</strong> Figure.NZ Business Demographics [18] | 
                    <a href="https://figure.nz/chart/ahwIqAsrrOUSfxB7-E2zPuowIznzkFOWM" class="source-link" target="_blank">View Source</a>
                </div>
            </div>
        </div>

        <!-- Charts Row 2 -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
            <!-- Revenue Distribution -->
            <div class="card p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold text-gray-900">Revenue by Segment (NZD $M)</h3>
                    <div class="badge badge-secondary">Bar Chart</div>
                </div>
                <div class="chart-container">
                    <canvas id="revenueChart"></canvas>
                </div>
                <div class="citation">
                    <strong>Data Source:</strong> IBISWorld & Industry Analysis [16][18] | 
                    <a href="https://www.ibisworld.com/new-zealand/market-size/printing/166/" class="source-link" target="_blank">View Source</a>
                </div>
            </div>

            <!-- Entity Count vs Revenue Efficiency -->
            <div class="card p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold text-gray-900">Entity Count vs Revenue per Entity</h3>
                    <div class="badge badge-secondary">Line Chart</div>
                </div>
                <div class="chart-container">
                    <canvas id="efficiencyChart"></canvas>
                </div>
                <div class="citation">
                    <strong>Data Source:</strong> Figure.NZ & Industry Reports [18][13][14] | 
                    <a href="https://figure.nz/chart/ahwIqAsrrOUSfxB7-E2zPuowIznzkFOWM" class="source-link" target="_blank">View Source</a>
                </div>
            </div>
        </div>

        <!-- Strategic Insights -->
        <div class="section-header">
            <h2 class="section-title">Strategic Insights</h2>
            <p class="section-description">Key business strategies and market opportunities based on data analysis</p>
        </div>
        
        <div class="card p-8 mb-12">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="insight-card insight-card-blue">
                    <div class="flex items-center mb-3">
                        <div class="w-3 h-3 bg-blue-500 rounded-full mr-3"></div>
                        <h4 class="insight-title insight-title-blue">Volume Play Strategy</h4>
                    </div>
                    <p class="insight-text insight-text-blue">Target zero and 1-5 employee segments for market share growth and volume-based revenue</p>
                    <div class="citation">
                        <strong>Based on:</strong> 73% of businesses having 0-5 employees [18]
                    </div>
                </div>
                <div class="insight-card insight-card-green">
                    <div class="flex items-center mb-3">
                        <div class="w-3 h-3 bg-green-500 rounded-full mr-3"></div>
                        <h4 class="insight-title insight-title-green">Value Play Strategy</h4>
                    </div>
                    <p class="insight-text insight-text-green">Focus on 6-19 and 50+ employee segments for revenue maximization and higher margins</p>
                    <div class="citation">
                        <strong>Based on:</strong> Higher per-entity spend: $6K-$35K vs $800-$2.5K [13][14]
                    </div>
                </div>
                <div class="insight-card insight-card-purple">
                    <div class="flex items-center mb-3">
                        <div class="w-3 h-3 bg-purple-500 rounded-full mr-3"></div>
                        <h4 class="insight-title insight-title-purple">Specialization</h4>
                    </div>
                    <p class="insight-text insight-text-purple">Government & Education sector offers stable, contract-based opportunities with predictable revenue</p>
                    <div class="citation">
                        <strong>Based on:</strong> PTAS panel procurement required [11][19][20]
                    </div>
                </div>
            </div>
        </div>

        <!-- Detailed Data Table -->
        <div class="section-header">
            <h2 class="section-title">Detailed Segment Analysis</h2>
            <p class="section-description">Comprehensive breakdown of market segments with revenue and entity counts</p>
        </div>
        
        <div class="card p-6 mb-12">
            <div class="table-container">
                <table class="table">
                    <thead class="table-header">
                        <tr>
                            <th class="table-header-cell">Segment</th>
                            <th class="table-header-cell">Market Share</th>
                            <th class="table-header-cell">Revenue (NZD $M)</th>
                            <th class="table-header-cell">Entities</th>
                            <th class="table-header-cell">Per Entity (NZD $)</th>
                            <th class="table-header-cell">Data Source</th>
                        </tr>
                    </thead>
                    <tbody class="table-body">
                        <tr class="table-row">
                            <td class="table-cell table-cell-primary">Zero employees</td>
                            <td class="table-cell table-cell-secondary">27.3%</td>
                            <td class="table-cell table-cell-secondary">$36.5M</td>
                            <td class="table-cell table-cell-secondary">45,601</td>
                            <td class="table-cell table-cell-secondary">$800</td>
                            <td class="table-cell table-cell-secondary">[18][16]</td>
                        </tr>
                        <tr class="table-row">
                            <td class="table-cell table-cell-primary">1-5 employees</td>
                            <td class="table-cell table-cell-secondary">19.9%</td>
                            <td class="table-cell table-cell-secondary">$26.6M</td>
                            <td class="table-cell table-cell-secondary">18,200</td>
                            <td class="table-cell table-cell-secondary">$1,462</td>
                            <td class="table-cell table-cell-secondary">[18][16]</td>
                        </tr>
                        <tr class="table-row">
                            <td class="table-cell table-cell-primary">6-19 employees</td>
                            <td class="table-cell table-cell-secondary">19.6%</td>
                            <td class="table-cell table-cell-secondary">$26.2M</td>
                            <td class="table-cell table-cell-secondary">17,900</td>
                            <td class="table-cell table-cell-secondary">$1,464</td>
                            <td class="table-cell table-cell-secondary">[16][18]</td>
                        </tr>
                        <tr class="table-row">
                            <td class="table-cell table-cell-primary">50+ employees</td>
                            <td class="table-cell table-cell-secondary">16.4%</td>
                            <td class="table-cell table-cell-secondary">$21.9M</td>
                            <td class="table-cell table-cell-secondary">625</td>
                            <td class="table-cell table-cell-secondary">$35,000</td>
                            <td class="table-cell table-cell-secondary">[16][18]</td>
                        </tr>
                        <tr class="table-row">
                            <td class="table-cell table-cell-primary">20-49 employees</td>
                            <td class="table-cell table-cell-secondary">14.0%</td>
                            <td class="table-cell table-cell-secondary">$18.7M</td>
                            <td class="table-cell table-cell-secondary">12,800</td>
                            <td class="table-cell table-cell-secondary">$1,461</td>
                            <td class="table-cell table-cell-secondary">[18][16]</td>
                        </tr>
                        <tr class="table-row">
                            <td class="table-cell table-cell-primary">Government & Education</td>
                            <td class="table-cell table-cell-secondary">2.8%</td>
                            <td class="table-cell table-cell-secondary">$3.8M</td>
                            <td class="table-cell table-cell-secondary">2,560</td>
                            <td class="table-cell table-cell-secondary">$1,484</td>
                            <td class="table-cell table-cell-secondary">[11][19]</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Market Trends Section -->
        <div class="section-header">
            <h2 class="section-title">Market Trends & Insights</h2>
            <p class="section-description">Industry context and emerging patterns in the B2B leasing market</p>
        </div>
        
        <div class="card p-8 mb-12">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="trend-card trend-card-yellow">
                    <div class="flex items-center mb-3">
                        <div class="w-3 h-3 bg-yellow-500 rounded-full mr-3"></div>
                        <h4 class="trend-title trend-title-yellow">Industry Context</h4>
                    </div>
                    <p class="trend-text trend-text-yellow">NZ printing industry valued at $1.4 billion (2025), declining 2.2% p.a. due to digitization and evolving business needs</p>
                    <div class="citation">
                        <strong>Source:</strong> IBISWorld [12] | 
                        <a href="https://www.ibisworld.com/new-zealand/industry/printing/166/" class="source-link" target="_blank">View Source</a>
                    </div>
                </div>
                <div class="trend-card trend-card-indigo">
                    <div class="flex items-center mb-3">
                        <div class="w-3 h-3 bg-indigo-500 rounded-full mr-3"></div>
                        <h4 class="trend-title trend-title-indigo">Leasing Penetration</h4>
                    </div>
                    <p class="trend-text trend-text-indigo">67-80% of B2B office equipment transactions now occur on lease or managed print agreements, indicating strong market adoption</p>
                    <div class="citation">
                        <strong>Source:</strong> Industry Reports [15][13][14] | 
                        <a href="https://www.ricoh.co.nz/industries/ricoh-financial-services" class="source-link" target="_blank">View Source</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sources Section -->
        <div class="sources-section">
            <div class="section-header">
                <h2 class="section-title">Data Sources & Citations</h2>
                <p class="section-description">Comprehensive list of all data sources used in this market analysis</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h4 class="font-semibold text-gray-900 mb-4 text-lg">Primary Market Data</h4>
                    <div class="source-item">
                        <span class="source-number">[12]</span> IBISWorld, "Printing in New Zealand â€“ Market Size Statistics," 2025-06-07
                        <a href="https://www.ibisworld.com/new-zealand/industry/printing/166/" class="source-link" target="_blank">View</a>
                    </div>
                    <div class="source-item">
                        <span class="source-number">[16]</span> IBISWorld, "Printing in New Zealand â€“ Market Research Report (2015-2030)," 2025-07-10
                        <a href="https://www.ibisworld.com/new-zealand/market-size/printing/166/" class="source-link" target="_blank">View</a>
                    </div>
                    <div class="source-item">
                        <span class="source-number">[17]</span> IBISWorld, "Furniture, Appliance and Equipment Rental in New Zealand," 2025-07-06
                        <a href="https://www.ibisworld.com/new-zealand/industry/furniture-appliance-and-equipment-rental/670/" class="source-link" target="_blank">View</a>
                    </div>
                    <div class="source-item">
                        <span class="source-number">[18]</span> Figure.NZ, "Businesses in Christchurch City, New Zealand," 2024-10-30
                        <a href="https://figure.nz/chart/ahwIqAsrrOUSfxB7-E2zPuowIznzkFOWM" class="source-link" target="_blank">View</a>
                    </div>
                </div>
                <div>
                    <h4 class="font-semibold text-gray-900 mb-4 text-lg">Industry & Government Sources</h4>
                    <div class="source-item">
                        <span class="source-number">[11]</span> New Zealand Government Procurement, "Print technology and associated services," 2023-08-30
                        <a href="https://www.procurement.govt.nz/contracts/print-technology-and-associated-services/" class="source-link" target="_blank">View</a>
                    </div>
                    <div class="source-item">
                        <span class="source-number">[13]</span> BDL Copiers, "Should I Lease or Buy Business Printers?" 2024-06-25
                        <a href="https://bdlcopiers.co.nz/lease-or-buy/" class="source-link" target="_blank">View</a>
                    </div>
                    <div class="source-item">
                        <span class="source-number">[14]</span> Canon New Zealand, "Purchasing A Printer For Your Business," 2022-01-12
                        <a href="https://www.canon.co.nz/business/purchasing-a-printer-for-your-business" class="source-link" target="_blank">View</a>
                    </div>
                    <div class="source-item">
                        <span class="source-number">[19]</span> Ricoh New Zealand, "Partner for Print in Government," 2025-06-19
                        <a href="https://www.ricoh.co.nz/industries/education" class="source-link" target="_blank">View</a>
                    </div>
                </div>
            </div>
            
            <div class="data-note">
                <p class="data-note-text">
                    <strong>Note:</strong> All data represents 2024-2025 estimates based on the latest available industry reports, 
                    government statistics, and market research. Market penetration figures are derived from industry analysis 
                    and may vary based on specific market conditions and timing. This dashboard follows academic citation standards 
                    for transparency and data verification.
                </p>
            </div>
        </div>
    </div>

    <script>
        // Wait for DOM to be fully loaded before initializing charts
        document.addEventListener('DOMContentLoaded', function() {
            // Market data with updated figures from sources.md
            const marketData = {
                segments: ['Zero employees', '1-5 employees', '6-19 employees', '50+ employees', '20-49 employees', 'Government & Education'],
                marketShare: [27.3, 19.9, 19.6, 16.4, 14.0, 2.8],
                revenue: [36.5, 26.6, 26.2, 21.9, 18.7, 3.8],
                entities: [45601, 18200, 17900, 625, 12800, 2560],
                perEntity: [800, 1462, 1464, 35000, 1461, 1484]
            };

            // Chart colors using Shadcn chart color variables
            const colors = [
                'hsl(var(--chart-1))', 
                'hsl(var(--chart-2))', 
                'hsl(var(--chart-3))', 
                'hsl(var(--chart-4))', 
                'hsl(var(--chart-5))', 
                '#06B6D4'
            ];

            // Helper function to safely create charts
            function createChart(canvasId, chartConfig) {
                const canvas = document.getElementById(canvasId);
                if (!canvas) {
                    console.warn(`Canvas element with id '${canvasId}' not found`);
                    return null;
                }
                
                try {
                    return new Chart(canvas, chartConfig);
                } catch (error) {
                    console.error(`Error creating chart for ${canvasId}:`, error);
                    return null;
                }
            }

            // Market Penetration Pie Chart
            createChart('penetrationChart', {
                type: 'doughnut',
                data: {
                    labels: ['Current Market (45%)', 'Untapped Market (55%)'],
                    datasets: [{
                        data: [60.1, 73.5],
                        backgroundColor: ['hsl(var(--chart-1))', '#E5E7EB'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                usePointStyle: true,
                                font: {
                                    family: 'Inter',
                                    size: 12
                                }
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: '#fff',
                            bodyColor: '#fff',
                            borderColor: 'hsl(var(--chart-1))',
                            borderWidth: 1,
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': NZD $' + context.parsed + 'M';
                                }
                            }
                        }
                    }
                }
            });

            // Business Segments Bar Chart
            createChart('segmentsChart', {
                type: 'bar',
                data: {
                    labels: marketData.segments,
                    datasets: [{
                        label: 'Market Share (%)',
                        data: marketData.marketShare,
                        backgroundColor: colors,
                        borderWidth: 0,
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: '#fff',
                            bodyColor: '#fff',
                            borderColor: 'hsl(var(--chart-1))',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Market Share (%)',
                                font: {
                                    family: 'Inter',
                                    size: 12
                                }
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // Revenue Chart
            createChart('revenueChart', {
                type: 'bar',
                data: {
                    labels: marketData.segments,
                    datasets: [{
                        label: 'Revenue (NZD $M)',
                        data: marketData.revenue,
                        backgroundColor: colors,
                        borderWidth: 0,
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: '#fff',
                            bodyColor: '#fff',
                            borderColor: 'hsl(var(--chart-1))',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Revenue (NZD $M)',
                                font: {
                                    family: 'Inter',
                                    size: 12
                                }
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // Efficiency Chart (Dual Y-axis)
            createChart('efficiencyChart', {
                type: 'line',
                data: {
                    labels: marketData.segments,
                    datasets: [
                        {
                            label: 'Number of Entities',
                            data: marketData.entities,
                            yAxisID: 'y',
                            borderColor: 'hsl(var(--chart-1))',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            fill: true,
                            tension: 0.4,
                            pointRadius: 6,
                            pointHoverRadius: 8
                        },
                        {
                            label: 'Revenue per Entity (NZD $)',
                            data: marketData.perEntity,
                            yAxisID: 'y1',
                            borderColor: 'hsl(var(--chart-2))',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            fill: true,
                            tension: 0.4,
                            pointRadius: 6,
                            pointHoverRadius: 8
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                usePointStyle: true,
                                padding: 20,
                                font: {
                                    family: 'Inter',
                                    size: 12
                                }
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: '#fff',
                            bodyColor: '#fff',
                            borderColor: 'hsl(var(--chart-1))',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        x: {
                            display: true,
                            title: {
                                display: true,
                                text: 'Business Segments',
                                font: {
                                    family: 'Inter',
                                    size: 12
                                }
                            },
                            grid: {
                                display: false
                            }
                        },
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'Number of Entities',
                                font: {
                                    family: 'Inter',
                                    size: 12
                                }
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'Revenue per Entity (NZD $)',
                                font: {
                                    family: 'Inter',
                                    size: 12
                                }
                            },
                            grid: {
                                drawOnChartArea: false,
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                        }
                    }
                }
            });
        });

        // Add error handling for any potential MutationObserver issues
        window.addEventListener('error', function(event) {
            if (event.error && event.error.message && event.error.message.includes('MutationObserver')) {
                console.warn('MutationObserver error detected and handled');
                event.preventDefault();
            }
        });
    </script>
</body>
</html>